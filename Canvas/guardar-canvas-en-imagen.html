<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Exportar Canvas a Imagen</title>
</head>
<body>
<h1>Exportar Canvas a Imagen</h1>

<p style="text-align:center;"><canvas height="300px" width="300px" id="micanvas">
Su navegador no soporta en elemento CANVAS</canvas></p>


<fieldset><legend>Pulsa sobre el tipo de imagen y el resultado se generará abajo</legend><button id="png">Guardar Imagen en PNG</button> | <button id="jpeg">Guardar Imagen en JPEG</button><br/> 
</fieldset>

<img src="" id="laimagen"/>

<script>
var canvas = document.getElementById("micanvas");
var ctx = canvas.getContext("2d");

// Dibujamos algo sencillo en el Canvas para exportarlo
ctx.fillStyle = "rgb(255,0,0)";
ctx.fillRect(20,20,100,100);

ctx.fillStyle = "rgb(0,255,0)";
ctx.fillRect(60,60,140,140);

ctx.fillStyle = "rgb(0,0,255)";
ctx.fillRect(100,100,180,180);


var img = document.getElementById("laimagen");

var png = document.getElementById("png");
png.addEventListener("click",function(){	
	var dato = canvas.toDataURL("image/png");
	dato = dato.replace("image/png", "image/octet-stream");
	document.location.href = dato;		
},false);



var jpeg = document.getElementById("jpeg");
jpeg.addEventListener("click",function(){	
	var dato = canvas.toDataURL("image/jpeg");
	dato = dato.replace("image/jpeg", "image/octet-stream");
	document.location.href = dato;	
},false);

</script>


<br><br>
<hr>
Art&iacute;culo disponible en: <a href="http://lineadecodigo.com/html5/descargar-un-canvas-a-una-imagen-con-html5/">http://lineadecodigo.com/html5/descargar-un-canvas-a-una-imagen-con-html5/</a><br/>
<a href="http://lineadecodigo.com" title="Linea de Codigo">lineadecodigo.com</a>

</body>
</html>